[
    {
      "name": "${env}-${project}-app-container",
      "image": "789536878847.dkr.ecr.us-east-1.amazonaws.com/eloquent-ai-app:latest",
      "essential": true,
      "portMappings": [
        { "containerPort": ${container_port}, "protocol": "tcp" }
      ],
      "environment": [
        { "name": "APP_VERSION", "value": "1.0.0" },
        { "name": "ENVIRONMENT", "value": "${env}" }
      ],
      "logConfiguration": {
        "logDriver": "awsfirelens",
        "options": {
          "Name": "cloudwatch",
          "region": "us-east-1",
          "log_group_name": "/ecs/${env}-${project}-api-svc",
          "log_stream_prefix": "app",
          "auto_create_group": "true"
        }
      }
    },

    {
      "name": "firelens",
      "image": "amazon/aws-for-fluent-bit:latest",
      "essential": true,
      "firelensConfiguration": {
        "type": "fluentbit",
        "options": {
          "enable-ecs-log-metadata": "true"
        }
      },
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/${env}-${project}-api-svc-firelens",
          "awslogs-region": "us-east-1",
          "awslogs-stream-prefix": "firelens"
        }
      }
    }
  ]
